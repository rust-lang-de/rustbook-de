<!DOCTYPE HTML>
<html lang="de" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Mit Modulen den Kontrollumfang und Datenschutz steuern - Die Programmiersprache Rust</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Eine deutsche Gemeinschafts-Übersetzung des offiziellen Rust-Buchs.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="theme/semantic-notes.css">
        <link rel="stylesheet" href="theme/listing.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">Die Programmiersprache Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-de/rustbook-de" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="mit-modulen-den-kontrollumfang-und-datenschutz-steuern"><a class="header" href="#mit-modulen-den-kontrollumfang-und-datenschutz-steuern">Mit Modulen den Kontrollumfang und Datenschutz steuern</a></h2>
<p>In diesem Abschnitt werden wir über Module und andere Teile des Modulsystems
sprechen, nämlich <em>Pfade</em>, die es dir erlauben, Elemente zu benennen; das
Schlüsselwort <code>use</code>, das einen Pfad in den Gültigkeitsbereich bringt; und das
Schlüsselwort <code>pub</code>, um Elemente öffentlich zu machen. Wir werden auch das
Schlüsselwort <code>as</code>, externe Pakete und den Stern-Operator (glob operator)
besprechen.</p>
<h3 id="spickzettel-für-module"><a class="header" href="#spickzettel-für-module">Spickzettel für Module</a></h3>
<p>Bevor wir zu den Details von Modulen und Pfaden kommen, stellen wir hier eine
kurze Referenz zusammen, wie Module, Pfade, das Schlüsselwort <code>use</code> und das
Schlüsselwort <code>pub</code> im Compiler funktionieren und wie die meisten Entwickler
ihren Code organisieren. Wir werden im Laufe dieses Kapitels Beispiele für jede
dieser Regeln durchgehen, aber dies ist ein guter Ort, um sich daran zu
erinnern, wie Module funktionieren.</p>
<ul>
<li><strong>Beginne bei der Kistenwurzel (crate root)</strong>: Beim Kompilieren einer Kiste
sucht der Compiler zuerst in der Wurzeldatei der Kiste (normalerweise
<em>src/lib.rs</em> für eine Bibliothekskiste oder <em>src/main.rs</em> für eine
Binärkiste).</li>
<li><strong>Module deklarieren</strong>: In der Kisten-Stammdatei kannst du neue Module
deklarieren; z.B. deklarierst du ein „Garten“-Modul mit <code>mod garden;</code>. Der
Compiler wird an diesen Stellen nach dem Code des Moduls suchen:
<ul>
<li>In der Zeile direkt nach <code>mod garden</code>, in geschweiften Klammern anstelle
des Semikolons</li>
<li>In der Datei <em>src/garden.rs</em></li>
<li>In der Datei <em>src/garden/mod.rs</em></li>
</ul>
</li>
<li><strong>Submodule deklarieren</strong>: In jeder anderen Datei als der Kistenwurzel
kannst du Untermodule deklarieren. Du kannst zum Beispiel <code>mod vegetables;</code>
in <em>src/garden.rs</em> deklarieren. Der Compiler sucht den Code des Submoduls in
dem Verzeichnis, das nach dem übergeordneten Modul benannt ist, an folgenden
Stellen:
<ul>
<li>In der Zeile direkt nach <code>mod vegetables</code>, in geschweiften Klammern
anstelle des Semikolons</li>
<li>In der Datei <em>src/garden/vegetables.rs</em></li>
<li>In der Datei <em>src/garden/vegetables/mod.rs</em></li>
</ul>
</li>
<li><strong>Pfade zum Code in Modulen</strong>: Sobald ein Modul Teil deiner Kiste ist, kannst
du auf den Code in diesem Modul von jedem anderen Ort in derselben Kiste aus
referenzieren, solange die Datenschutzregeln dies zulassen, indem du den Pfad
zum Code verwendest. Zum Beispiel würde ein Typ <code>Asparagus</code> (engl. Spargel)
im Gartengemüse-Modul unter <code>crate::garden::vegetables::Asparagus</code> zu finden
sein.</li>
<li><strong>Privat vs. öffentlich</strong>: Der Code innerhalb eines Moduls ist standardmäßig
für seine übergeordneten Module nicht zugänglich. Um ein Modul öffentlich zu
machen, deklariere es mit <code>pub mod</code> anstelle von <code>mod</code>. Um Elemente innerhalb
eines öffentlichen Moduls ebenfalls öffentlich zu machen, verwende <code>pub</code> vor
ihren Deklarationen.</li>
<li><strong>Das Schlüsselwort <code>use</code></strong>: Innerhalb eines Gültigkeitsbereichs werden mit
dem Schlüsselwort <code>use</code> Verknüpfungen zu Elementen erstellt, um die
Wiederholung langer Pfade zu reduzieren. In jedem Gültigkeitsbereichs, der
auf <code>crate::garden::vegetables::Asparagus</code> referenzieren kann, kann man eine
Verknüpfung mit <code>use crate::garden::vegetables::Asparagus</code> erstellen und von
da an braucht man nur noch <code>Asparagus</code> zu schreiben, um diesen Typ im
Gültigkeitsbereich zu verwenden.</li>
</ul>
<p>Hier erstellen wir eine binäre Kiste namens <code>backyard</code> (Hinterhof), die diese
Regeln veranschaulicht. Das Verzeichnis der Kiste, ebenfalls <code>backyard</code>
genannt, enthält diese Dateien und Verzeichnisse:</p>
<pre><code class="language-text">backyard
├── Cargo.lock
├── Cargo.toml
└── src
    ├── garden
    │   └── vegetables.rs
    ├── garden.rs
    └── main.rs
</code></pre>
<p>Die Stammdatei der Kiste ist in diesem Fall <em>src/main.rs</em>, und sie enthält:</p>
<p><span class="filename">Dateiname: src/main.rs</span></p>
<pre><code class="language-rust noplayground ignore">use crate::garden::vegetables::Asparagus;

pub mod garden;

fn main() {
    let plant = Asparagus {};
    println!("Ich baue {plant:?} an!");
}</code></pre>
<p>Die Zeile <code>pub mod garden;</code> weist den Compiler an, den Code einzubinden, den er
in <em>src/garden.rs</em> findet, nämlich:</p>
<p><span class="filename">Dateiname: src/garden.rs</span></p>
<pre><code class="language-rust noplayground ignore">pub mod vegetables;</code></pre>
<p>Hier bedeutet <code>pub mod vegetables;</code>, dass der Code in
<em>src/garden/vegetables.rs</em> ebenfalls enthalten ist. Dieser Code ist:</p>
<pre><code class="language-rust noplayground ignore">#[derive(Debug)]
pub struct Asparagus {}</code></pre>
<p>Lass uns nun auf die Einzelheiten dieser Regeln eingehen und sie in der Praxis demonstrieren!</p>
<h3 id="gruppierung-von-zugehörigem-code-in-modulen"><a class="header" href="#gruppierung-von-zugehörigem-code-in-modulen">Gruppierung von zugehörigem Code in Modulen</a></h3>
<p><em>Module</em> ermöglichen es uns, den Code innerhalb einer Kiste zu organisieren,
damit er lesbar und leicht wiederverwendbar ist. Mit Modulen können wir auch
den <em>Datenschutz</em> (privacy) von Elementen kontrollieren, da Code innerhalb
eines Moduls standardmäßig privat ist. Private Elemente sind interne
Implementierungsdetails, die nicht für die externe Nutzung zur Verfügung
stehen. Wir können uns dafür entscheiden, Module und die darin enthaltenen
Elemente öffentlich zu machen, damit externer Code sie verwenden und von ihnen
abhängen kann.</p>
<p>Als Beispiel schreiben wir eine Bibliothekskiste, die die Funktionalität eines
Restaurants bietet. Wir werden die Signaturen der Funktionen definieren, aber
ihre Rümpfe leer lassen, um uns auf die Organisation des Codes zu konzentrieren
und nicht auf die Implementierung eines Restaurants.</p>
<p>Im Gaststättengewerbe werden einige Teile eines Restaurants als <em>Vorderseite
des Hauses</em> und andere als <em>Hinterseite des Hauses</em> bezeichnet. Auf der
Vorderseite des Hauses sind die Kunden; hier setzen Gastgeber ihre Kunden hin,
Kellner nehmen Bestellungen auf und rechnen ab und Barkeeper machen die
Getränke. Auf der Hinterseite des Hauses arbeiten die Küchenchefs und Köche in
der Küche, Geschirrspüler waschen ab und Manager erledigen Verwaltungsarbeiten.</p>
<p>Um unsere Kiste auf diese Weise zu strukturieren, können wir ihre Funktionen in
verschachtelten Modulen organisieren. Erstelle eine neue Bibliothek namens
<code>restaurant</code>, indem du <code>cargo new --lib restaurant</code> ausführst. Gib dann den
Code in Codeblock 7-1 in <em>src/lib.rs</em> ein, um einige Module und
Funktionssignaturen zu definieren. Hier ist der vordere Teil des Hauses:</p>
<p><span class="filename">Dateiname: src/lib.rs</span></p>
<pre><code class="language-rust noplayground">mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}

        fn seat_at_table() {}
    }

    mod serving {
        fn take_order() {}

        fn serve_order() {}

        fn take_payment() {}
    }
}</code></pre>
<p><span class="caption">Codeblock 7-1: Ein Modul <code>front_of_house</code>, das andere
Module enthält, die dann Funktionen enthalten</span></p>
<p>Wir definieren ein Modul mit dem Schlüsselwort <code>mod</code>, gefolgt vom Namen des
Moduls (in diesem Fall <code>front_of_house</code>). Der Rumpf des Moduls steht dann in
geschweiften Klammern. Innerhalb von Modulen können wir andere Module
platzieren, wie in diesem Fall mit den Modulen <code>hosting</code> und <code>serving</code>. Module
können auch Definitionen für andere Elemente enthalten, wie Strukturen,
Aufzählungen, Konstanten, Merkmalen und – wie in Codeblock 7-1 –
Funktionen.</p>
<p>Durch die Verwendung von Modulen können wir verwandte Definitionen gruppieren
und angeben, warum sie verwandt sind. Programmierer, die diesen Code verwenden,
können anhand der Gruppen durch den Code navigieren, anstatt alle Definitionen
lesen zu müssen, und finden so leichter die für sie relevanten Definitionen.
Programmierer, die diesem Code neue Funktionalität hinzufügen, wissen, wo sie
den Code platzieren müssen, damit das Programm übersichtlich bleibt.</p>
<p>Vorhin haben wir erwähnt, dass <em>src/main.rs</em> und <em>src/lib.rs</em> als Kistenwurzel
bezeichnet werden. Der Grund für ihren Namen ist, dass der Inhalt dieser beiden
Dateien ein Modul namens <code>crate</code> an der Wurzel der Modulstruktur der Kiste
bilden, die als <em>Modulbaum</em> bekannt ist.</p>
<p>Codeblock 7-2 zeigt den Modulbaum für die Struktur in Codeblock 7-1.</p>
<pre><code class="language-text">crate
 └── front_of_house
     ├── hosting
     │   ├── add_to_waitlist
     │   └── seat_at_table
     └── serving
         ├── take_order
         ├── serve_order
         └── take_payment
</code></pre>
<p><span class="caption">Codeblock 7-2: Modulbaum für den Code in Codeblock
7-1</span></p>
<p>Dieser Baum zeigt, wie einige Module in anderen Modulen verschachtelt sind;
z.B. ist <code>hosting</code> innerhalb von <code>front_of_house</code>. Der Baum zeigt auch, dass
einige Module <em>Geschwister</em> sind, was bedeutet, dass sie im selben Modul
definiert sind; <code>hosting</code> und <code>serving</code> sind Geschwister, die innerhalb von
<code>front_of_house</code> definiert sind. Wenn Modul A innerhalb von Modul B enthalten
ist, sagen wir, dass Modul A das <em>Kind</em> (child) von Modul B ist und dass Modul
B der <em>Elternteil</em> (parent) von Modul A ist. Beachte, dass der gesamte
Modulbaum als Wurzel das implizite Modul namens <code>crate</code> hat.</p>
<p>Der Modulbaum könnte dich an den Verzeichnisbaum des Dateisystems auf deinem
Computer erinnern; dies ist ein sehr treffender Vergleich! Genau wie
Verzeichnisse in einem Dateisystem verwendest du Module, um deinen Code zu
organisieren. Und genau wie Dateien in einem Verzeichnis brauchen wir einen
Weg, unsere Module zu finden.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch07-01-packages-and-crates.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch07-01-packages-and-crates.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>



        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/ferris.js"></script>


    </div>
    </body>
</html>
